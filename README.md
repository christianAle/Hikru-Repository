# Hikru Repository
### üê≥ Hikru Assessment Management API

This repository contains the Hikru Assessment Management API, a .NET 8 Web API with an Oracle XE database, fully containerized for easy local development and testing.

---

## üì¶ Features

- .NET 8 Web API for managing assessments
- Oracle XE 21c database with sample schema and data
- Docker Compose for one-command setup
- Health checks and API documentation (Swagger)
- Example API key authentication

---

## üöÄ Quick Start

### Prerequisites

- [Docker Desktop](https://www.docker.com/products/docker-desktop) (4GB+ RAM recommended)
- [PowerShell 5.1+](https://docs.microsoft.com/powershell/) (Windows) or Bash (Linux/macOS)
- Oracle Container Registry account (free): https://container-registry.oracle.com/

### 1. Oracle Container Registry Setup (One-time)

1. Visit [Oracle Container Registry](https://container-registry.oracle.com/)
2. Sign in and accept the license for **Database ‚Üí express**
3. Login from your terminal:
   ```sh
   docker login container-registry.oracle.com
   ```

### 2. Deploy the Application

#### Using PowerShell (recommended on Windows)

```powershell
cd Docker
.\deploy.ps1 -Action start
```

#### Using Bash (Linux/macOS)

```sh
cd Docker
./deploy.sh start
```

This will:
- Check Docker and Oracle registry access
- Build the API Docker image
- Start the Oracle database and API containers
- Wait for all services to be healthy
- Show access URLs and credentials

---

## üåê Access Points

| Service                  | URL                              | Description                  |
|--------------------------|----------------------------------|------------------------------|
| **API Swagger UI**       | http://localhost:8080/swagger    | Interactive API docs         |
| **API Health Check**     | http://localhost:8080/health     | Application health status    |
| **Oracle Enterprise**    | https://localhost:5500/em        | Database management          |
| **API Base URL**         | http://localhost:8080/api        | REST endpoints               |

**API Key:** `hikru-api-key-2025`  
Add header: `X-API-Key: hikru-api-key-2025` or `Authorization: Bearer hikru-api-key-2025`

---

## üóÑÔ∏è Database Schema

The Oracle database is initialized with:

```sql
CREATE TABLE ASSESSMENTS (
    ID NUMBER(10) GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    TITLE VARCHAR2(100) NOT NULL,
    DESCRIPTION VARCHAR2(1000) NOT NULL,
    LOCATION VARCHAR2(200) NOT NULL,
    STATUS NUMBER(1) DEFAULT 0 NOT NULL,
    RECRUITER_ID NUMBER(10) NOT NULL,
    DEPARTMENT_ID NUMBER(10) NOT NULL,
    BUDGET NUMBER(18,2) NOT NULL,
    CLOSING_DATE DATE,
    CREATED_DATE DATE DEFAULT SYSDATE NOT NULL,
    UPDATED_DATE DATE DEFAULT SYSDATE NOT NULL
);
```

Sample data is inserted automatically for testing.

---

## üõ†Ô∏è Useful Commands

- **Start all services:**  
  `docker-compose up -d`
- **Stop all services:**  
  `docker-compose down`
- **View logs:**  
  `docker-compose logs -f`
- **Check status:**  
  `docker-compose ps`
- **Connect to Oracle DB:**  
  `docker exec -it hikru-oracle-db sqlplus hikru_user/HikruUser123@XE`
- **Reset database:**  
  `docker-compose down -v && docker-compose up -d oracle-db`

---

## üîç Monitoring & Health Checks

- **API health:**  
  `curl http://localhost:8080/health`
- **Database health:**  
  `docker-compose ps`
- **View logs:**  
  `docker-compose logs hikru-assessment-api`
  `docker-compose logs hikru-oracle-db`

---

## üõ†Ô∏è Troubleshooting

- **Oracle Registry Login Failed:**  
  Ensure you accepted the license and are logged in:  
  `docker login container-registry.oracle.com`
- **Port Already in Use:**  
  Stop conflicting services or change ports in `docker-compose.yml`
- **Database Not Ready:**  
  Wait 2-5 minutes for Oracle to initialize. Check logs:  
  `docker-compose logs oracle-db`
- **API Health Check Failed:**  
  Check API logs and database connectivity.

---

## üîí Security Notes

‚ö†Ô∏è **This setup is for development only!**  
For production:
- Change all default passwords and secrets
- Store credentials securely (not in source code)
- Enable HTTPS and network security
- Regularly update Docker images

---

## üìö Additional Resources

- **Oracle Enterprise Manager:** https://localhost:5500/em  
  Username: `sys`  
  Password: `HikruPassword123`  
  Connect as: `SYSDBA`
- **API Documentation:** http://localhost:8080/swagger/v1/swagger.json

---

## üÜò Support

If you encounter issues:
1. Check logs: `docker-compose logs`
2. Verify status: `docker-compose ps`
3. Try restart: `docker-compose down && docker-compose up -d`
4. Clean reset: `docker-compose down -v && docker-compose up -d`

---

